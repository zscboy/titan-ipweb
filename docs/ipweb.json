{
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "schemes": [
    "https"
  ],
  "swagger": "2.0",
  "info": {
    "title": "extensions-server-api",
    "version": "v1"
  },
  "basePath": "/",
  "paths": {
    "/api/auth/login": {
      "post": {
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "schemes": [
          "https"
        ],
        "summary": "登陆",
        "operationId": "authLoginHandler",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "user_id"
              ],
              "properties": {
                "invite_code": {
                  "type": "string"
                },
                "password": {
                  "type": "string"
                },
                "user_id": {
                  "type": "string"
                },
                "verify_code": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "properties": {
                "access_token": {
                  "type": "string"
                },
                "email": {
                  "type": "string"
                },
                "expires_at": {
                  "type": "integer"
                },
                "invite_code": {
                  "type": "string"
                },
                "refresh_token": {
                  "type": "string"
                },
                "role": {
                  "type": "string"
                },
                "user_id": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/login-by-google": {
      "post": {
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "schemes": [
          "https"
        ],
        "summary": "谷歌登陆",
        "operationId": "authLoginByGoogleHandler",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "access_token": {
                  "type": "string"
                },
                "credential": {
                  "type": "string"
                },
                "invite_code": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "properties": {
                "access_token": {
                  "type": "string"
                },
                "email": {
                  "type": "string"
                },
                "expires_at": {
                  "type": "integer"
                },
                "invite_code": {
                  "type": "string"
                },
                "refresh_token": {
                  "type": "string"
                },
                "role": {
                  "type": "string"
                },
                "user_id": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/refresh-token": {
      "post": {
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "schemes": [
          "https"
        ],
        "summary": "刷新令牌",
        "operationId": "authRefreshTokenHandler",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "refresh_token"
              ],
              "properties": {
                "refresh_token": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "properties": {
                "access_token": {
                  "type": "string"
                },
                "expires_at": {
                  "type": "integer"
                },
                "refresh_token": {
                  "type": "string"
                },
                "role": {
                  "type": "string"
                },
                "user_id": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/register": {
      "post": {
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "schemes": [
          "https"
        ],
        "summary": "注册账号",
        "operationId": "authRegister",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "email",
                "verify_code"
              ],
              "properties": {
                "email": {
                  "type": "string"
                },
                "invite_code": {
                  "description": "邀请码",
                  "type": "string"
                },
                "password": {
                  "type": "string"
                },
                "verify_code": {
                  "description": "验证码",
                  "type": "string"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "properties": {
                "access_token": {
                  "type": "string"
                },
                "expires_at": {
                  "type": "integer"
                },
                "refresh_token": {
                  "type": "string"
                },
                "role": {
                  "type": "string"
                },
                "user_id": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/reset-password": {
      "post": {
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "schemes": [
          "https"
        ],
        "summary": "重设密码",
        "operationId": "authResetPassword",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "email",
                "password",
                "verify_code"
              ],
              "properties": {
                "email": {
                  "type": "string"
                },
                "password": {
                  "type": "string"
                },
                "verify_code": {
                  "description": "验证码",
                  "type": "string"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "properties": {
                "access_token": {
                  "type": "string"
                },
                "expires_at": {
                  "type": "integer"
                },
                "refresh_token": {
                  "type": "string"
                },
                "role": {
                  "type": "string"
                },
                "user_id": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/send-email-code": {
      "post": {
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "schemes": [
          "https"
        ],
        "summary": "发送验证码",
        "operationId": "authSendEmailCodeHandler",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "email",
                "purpose",
                "point_json"
              ],
              "properties": {
                "email": {
                  "type": "string"
                },
                "point_json": {
                  "type": "string"
                },
                "purpose": {
                  "type": "integer"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object"
            }
          }
        }
      }
    },
    "/api/auth/test": {
      "get": {
        "produces": [
          "application/json"
        ],
        "schemes": [
          "https"
        ],
        "summary": "test",
        "operationId": "authTestHandler",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "string"
            }
          }
        }
      }
    },
    "/api/auth/user-exists": {
      "post": {
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "schemes": [
          "https"
        ],
        "summary": "账号是否注册",
        "operationId": "authUserExists",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "email"
              ],
              "properties": {
                "email": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "properties": {
                "exists": {
                  "type": "boolean"
                }
              }
            }
          }
        }
      }
    },
    "/api/subuser/create": {
      "post": {
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "schemes": [
          "https"
        ],
        "summary": "创建子用户",
        "operationId": "createSubUser",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "username",
                "password",
                "pop_id",
                "upload_rate_limit",
                "download_rate_limit",
                "max_bandwidth_limit",
                "total_traffic_limit"
              ],
              "properties": {
                "download_rate_limit": {
                  "type": "integer",
                  "default": 1310720,
                  "example": 1310720
                },
                "max_bandwidth_limit": {
                  "type": "integer",
                  "default": 13107200,
                  "example": 13107200
                },
                "password": {
                  "type": "string"
                },
                "pop_id": {
                  "type": "string"
                },
                "total_traffic_limit": {
                  "type": "integer",
                  "default": 1073741824000,
                  "example": 1073741824000
                },
                "upload_rate_limit": {
                  "type": "integer",
                  "default": 655360,
                  "example": 655360
                },
                "username": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "properties": {
                "EndTime": {
                  "type": "integer"
                },
                "StartTime": {
                  "type": "integer"
                },
                "create_time": {
                  "type": "integer"
                },
                "current_traffic": {
                  "type": "integer"
                },
                "download_rate_limit": {
                  "type": "integer"
                },
                "max_bandwidth_limit": {
                  "type": "integer"
                },
                "password": {
                  "type": "string"
                },
                "server_address": {
                  "type": "string"
                },
                "status": {
                  "type": "string"
                },
                "total_traffic_limit": {
                  "type": "integer"
                },
                "upload_rate_limit": {
                  "type": "integer"
                },
                "username": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/api/subuser/delete": {
      "post": {
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "schemes": [
          "https"
        ],
        "summary": "删除子用户",
        "operationId": "deleteSubUser",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "username"
              ],
              "properties": {
                "username": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {}
          }
        }
      }
    },
    "/api/subuser/edit": {
      "post": {
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "schemes": [
          "https"
        ],
        "summary": "编辑用户的流量配额与带宽限制",
        "operationId": "editSubUserLimit",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "username"
              ],
              "properties": {
                "max_bandwidth_limit": {
                  "type": "integer"
                },
                "total_traffic_limit": {
                  "type": "integer"
                },
                "username": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {}
          }
        }
      }
    },
    "/api/subuser/list": {
      "get": {
        "produces": [
          "application/json"
        ],
        "schemes": [
          "https"
        ],
        "summary": "拉取子用户列表",
        "operationId": "listSubUser",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "properties": {
                "sub_users": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "required": [
                      "username",
                      "password",
                      "server_address",
                      "total_traffic_limit",
                      "current_traffic",
                      "max_bandwidth_limit",
                      "upload_rate_limit",
                      "download_rate_limit",
                      "create_time",
                      "status"
                    ],
                    "properties": {
                      "EndTime": {
                        "type": "integer"
                      },
                      "StartTime": {
                        "type": "integer"
                      },
                      "create_time": {
                        "type": "integer"
                      },
                      "current_traffic": {
                        "type": "integer"
                      },
                      "download_rate_limit": {
                        "type": "integer"
                      },
                      "max_bandwidth_limit": {
                        "type": "integer"
                      },
                      "password": {
                        "type": "string"
                      },
                      "server_address": {
                        "type": "string"
                      },
                      "status": {
                        "type": "string"
                      },
                      "total_traffic_limit": {
                        "type": "integer"
                      },
                      "upload_rate_limit": {
                        "type": "integer"
                      },
                      "username": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/subuser/list-invalid": {
      "get": {
        "produces": [
          "application/json"
        ],
        "schemes": [
          "https"
        ],
        "summary": "获取废弃的子用户列表",
        "operationId": "listInvalidSubUser",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "properties": {
                "sub_users": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "required": [
                      "username",
                      "password",
                      "server_address",
                      "total_traffic_limit",
                      "current_traffic",
                      "max_bandwidth_limit",
                      "upload_rate_limit",
                      "download_rate_limit",
                      "create_time",
                      "status"
                    ],
                    "properties": {
                      "EndTime": {
                        "type": "integer"
                      },
                      "StartTime": {
                        "type": "integer"
                      },
                      "create_time": {
                        "type": "integer"
                      },
                      "current_traffic": {
                        "type": "integer"
                      },
                      "download_rate_limit": {
                        "type": "integer"
                      },
                      "max_bandwidth_limit": {
                        "type": "integer"
                      },
                      "password": {
                        "type": "string"
                      },
                      "server_address": {
                        "type": "string"
                      },
                      "status": {
                        "type": "string"
                      },
                      "total_traffic_limit": {
                        "type": "integer"
                      },
                      "upload_rate_limit": {
                        "type": "integer"
                      },
                      "username": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/subuser/pops": {
      "get": {
        "produces": [
          "application/json"
        ],
        "schemes": [
          "https"
        ],
        "summary": "拉取pops列表",
        "operationId": "listPops",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "properties": {
                "pops": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "required": [
                      "name",
                      "id",
                      "area",
                      "socks5_server"
                    ],
                    "properties": {
                      "area": {
                        "type": "string"
                      },
                      "id": {
                        "type": "string"
                      },
                      "name": {
                        "type": "string"
                      },
                      "socks5_server": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/subuser/total-quota": {
      "get": {
        "produces": [
          "application/json"
        ],
        "schemes": [
          "https"
        ],
        "summary": "获取总的配额",
        "operationId": "getTotalQuota",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "properties": {
                "sub_user_count": {
                  "type": "integer"
                },
                "total_bandwidth_allocated": {
                  "type": "integer"
                },
                "total_bandwidth_limit": {
                  "type": "integer"
                },
                "total_traffic_allocated": {
                  "type": "integer"
                },
                "total_traffic_limit": {
                  "type": "integer"
                }
              }
            }
          }
        }
      }
    },
    "/api/subuser/update-status": {
      "post": {
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "schemes": [
          "https"
        ],
        "summary": "更新子账户状态",
        "operationId": "updateSubUserStatus",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "username",
                "status"
              ],
              "properties": {
                "status": {
                  "type": "string"
                },
                "username": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {}
          }
        }
      }
    }
  },
  "x-date": "2025-12-08 16:41:04",
  "x-description": "This is a goctl generated swagger file.",
  "x-github": "https://github.com/zeromicro/go-zero",
  "x-go-zero-doc": "https://go-zero.dev/",
  "x-goctl-version": "1.8.4"
}